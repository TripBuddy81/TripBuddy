<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Trip Buddy</title>
    <script src="./libs/handlebars/handlebars.min-v4.7.7.js"></script>
    <script src="./libs/jquery3/jquery-3.6.3.min.js"></script>
    <script src="./libs/bootstrap-5.0.2-dist/js/bootstrap.js"></script>
    <script src="./libs/particles.js-master/particles.js"></script>
    <script src="https://open.spotify.com/embed-podcast/iframe-api/v1" async></script>

    <script src="./config/config.js"></script>
    <script src="./config/optionalConfig.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/particles.js"></script>
    <script src="./js/intense.js"></script>
    <script src="./js/spotify.js"></script>

    <link rel="stylesheet" href="./libs/bootstrap-5.0.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="./css/main.css">

    <link rel="icon" type="image/png" href="assets/mushroom.png"/>
</head>

<body>
<script id="mainTemplate" type="text/x-handlebars-template">
    <div id="mainMenu" class="">
        <!-- Left side-->
        <div class="btn btn-primary btn-lg me-2" id="showVideoSection">
            Videos
        </div>
        <div class="btn btn-primary btn-lg me-2" id="showImageSection">
            Images
        </div>
        <div class="btn btn-primary btn-lg me-2" id="showDiscoSection">
            Disco
        </div>
        <img id="turnScreenBlack" class="ms-2" src="assets/monitorOff.png"
             data-image="./media/images/41.jpg">

        <!-- Right side-->
        <div id="burgerContainer" class="float-end me-3 mt-3">
            <div id="menuToggle">
                <input id="menuClose" type="checkbox"/>
                <span class="burgerMenu"></span>
                <span class="burgerMenu"></span>
                <span class="burgerMenu"></span>
                <ul id="menu">
                    <img id="refresh" class="float-end refreshIcon me-3 mt-3"
                         src="./assets/refresh.png">
                    <select id="devices"
                            class="form-control"
                            style=""></select>
                    <span>---------------------------------------------------------------------------------</span>
                    <li class="menuItem deactivateGuidedThoughts">Stop guided thoughts</li>
                    <li class="menuItem" id="fullscreenAutoplay">Toggling fullscreen triggers play/stop <span id="fullscreenAutoplaySetting">(off)</span></li>
                    <span>---------------------------------------------------------------------------------</span>
                    <li class="menuItem"><a href="help.html" target="_blank">Help/Info</a></li>
                    <li class="menuItem" id="showMiscSection">Misc Links</li>
                    <span>---------------------------------------------------------------------------------</span>
                    <li class="menuItem" id="toggleInfo">Toggle video info</li>
                    <li class="menuItem" id="debugMode">Debug mode - less videos <span id="debugModeSetting">(off)</span></li>
                </ul>
            </div>
        </div>
        <img id="fullscreenIcon" class="toggleFullscreen float-end me-3 mt-3" src="./assets/disableFullscreen.png">
        <div id="timerMinutes" class="float-end me-3">00:00</div>
        <div id="launchText" class="float-end me-3 mt-3" data-bs-toggle="modal" data-bs-target="#preFlightChecklist">
            Loading...
        </div>


        <div id="progressGraphContainer" class="float-end me-3 mt-3">
            <table id="progressGraph">
                <tbody>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="ignition" data-time=0
                        style="--start:0.0; --end:0.1;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="onset" data-time=20
                        style="--start:0.1; --end:0.6;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=40
                        style="--start:0.6; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=60
                        style="--start:1.0; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=80
                        style="--start:1.0; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=100
                        style="--start:1.0; --end:0.9;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=120
                        style="--start:0.9; --end:0.8;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=140
                        style="--start:0.8; --end:0.7;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=160
                        style="--start:0.7; --end:0.6;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=180
                        style="--start:0.6; --end:0.5;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=200
                        style="--start:0.5; --end:0.3;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=220
                        style="--start:0.3; --end:0.0;"></td>
                </tr>
                </tbody>
            </table>
        </div>


        <select id="playlists" class="float-end me-3 mt-3 form-control">
            <option data-spotify-id="" value="" disabled selected value>Select Playlist</option>
            {{#playlists}}
            <option data-spotify-id="spotify:playlist:{{id}}" value="spotify:playlist:{{id}}">{{label}}</option>
            {{/playlists}}
        </select>


        <div id="iFrameSpotifyPlayerContainer" class="float-end ">
            <div id="iFrameSpotifyPlayer"></div>
        </div>


        <div id="oAuthPlayerControl" class="float-end mt-3">
            <img id="next" class="float-end playerIcon me-4 mt-3" src="./assets/next.png">
            <img id="startStop" class="float-end playerIcon me-4 mt-3" src="./assets/play.png">
        </div>


    </div>


    <div class="modal fade" id="preFlightChecklist" tabindex="-1" aria-labelledby="preFlightChecklistLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="float-start">Hitting the button will start the timer for a typical LemonTek Trip. (Onset
                        till 00:40 | Peak till 01:40 | Chillout till 03:40)
                    </div>
                    <div id="liftOff" type="button" class="btn btn-primary">Lift off!</div>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            <h1 class="modal-title" id="preFlightChecklistLabel">Preflight checklist</h1>
                            <ul>
                                {{#preFlightChecklist}}
                                <li>
                                    {{checklistItem}}
                                </li>
                                {{/preFlightChecklist}}
                            </ul>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <h1>Reminders</h1>
                                    <h2>Display Popup as reminder after configured time</h2>
                                    <div class="options form-check form-switch">
                                        <label class="form-check-label" for="doseUpCheckbox">Dose Up after </label>
                                        <input class="form-check-input" type="checkbox" id="doseUpCheckbox">
                                        <input type="number" id="doseUpReminderInMinutes" name="doseUpReminderInMinutes"
                                               value="60" min="1" max="600">
                                        <span>minutes</span>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-5">
                                <div class="col">
                                    <h1>Guided thoughts</h1>
                                    <h2>Will display given texts from time to time</h2>
                                    <label class="form-check-label me-2" for="guidedThought1">#1</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought1"
                                           name="guidedThought1"
                                           value="" maxlength="40"> </br>

                                    <label class="form-check-label me-2" for="guidedThought1">#2</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought2"
                                           name="guidedThought2"
                                           value="" maxlength="40"> </br>

                                    <label class="form-check-label me-2" for="guidedThought1">#3</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought3"
                                           name="guidedThought3"
                                           value="" maxlength="40"> </br>

                                    <label class="guidedThoughtMinutesLabel form-check-label me-2"
                                           for="guidedThoughtMinMinutes">Min minutes till display</label>
                                    <input type="number" class="guidedThoughtMinutes" id="guidedThoughtMinMinutes"
                                           name="guidedThoughtMinMinutes"
                                           value="10" min="1" max="60"> </br>

                                    <label class="guidedThoughtMinutesLabel form-check-label me-2"
                                           for="guidedThoughtMaxMinutes">Max minutes till display</label>
                                    <input type="number" class="guidedThoughtMinutes" id="guidedThoughtMaxMinutes"
                                           name="guidedThoughtMaxMinutes"
                                           value="20" min="1" max="60">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="timedRecommendation" tabindex="-1" aria-labelledby="timedRecommendationLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body d-flex align-items-center justify-content-center">
                    <h1 id="doseUpRecommendation" style="display:none;">Dose up now!</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>

    <div id="videos" class="ms-3">
        <div class="sticky">
            {{#selectableTags}}
            <div id="{{selectableTag}}filter" class="{{selectableTag}}filter videoFilterBtn btn btn-primary me-2">
                {{selectableTag}}
            </div>
            {{/selectableTags}}
            <div class="XXX XXXfilter videoFilterBtn btn btn-primary me-2">XXX</div>
        </div>

        <div id="displayedVideos" class="mt-3">
            {{#videosYoutube}}
            <div class="videoContainer {{tags}}">
                <div class="iFrameContainer">
                    <iframe width="554" height="315" class="videoFrame" src="{{videoLink}}&rel=0"
                            frameborder="0"
                            allow=""></iframe>
                    <div class="videoInfo mb-2">
                        <div>{{tags}}</div>
                        <div>({{videoLink}})</div>
                    </div>
                    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>
                    <div class="videoLabel">
                        {{label}}
                    </div>
                    <div class="videoMenuOverlayMinimized">
                        <img class="enableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayMinimized2"></div>
                    <div class="videoMenuOverlayFullscreen">
                        <img class="disableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayFullscreen2"></div>
                </div>
            </div>
            {{/videosYoutube}}

            {{#videosLocal}}
            <div class="videoContainer {{tags}}">
                <div class="iFrameContainer">
                    <video class="videoFrame" controls muted controlsList="nofullscreen">
                        <source src="{{videoLink}}" type="video/mp4">
                    </video>
                    <div class="videoInfo mb-2">{{tags}}
                        <div>({{videoLink}})</div>
                    </div>
                    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>
                    <div class="videoLabel">
                        {{label}}
                    </div>
                    <div class="videoMenuOverlayMinimized">
                        <img class="enableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayFullscreen">
                        <img class="disableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                </div>
            </div>
            {{/videosLocal}}
        </div>
    </div>

    <div id="images" class="mt-3 mb-3 ms-3">
        {{#images}}
        <img width="540" height="304" src="{{image}}" class="fullscreenImage me-2 mb-2"
             data-image="{{image}}">
        {{/images}}
    </div>

    <div id="disco" class="">
        <div id="particles-js">
            <div id="discoSettingsContainer">
                <div id="discoSettings">
                    <label id="discoBGColorPickerContainer" for="discoBGColorPicker">
                        <img id="discoBGColorPickerImage" src="./assets/colorpicker.png" title="colorpicker">
                        <input type="color" id="discoBGColorPicker" style="display: none">
                    </label>
                    <div class="discoSetBGColor" style="background-color:#000000;">&nbsp;</div>
                    <div class="discoSetBGColor" style="background-color:#B61924;">&nbsp;</div>
                    <div class="discoSetBGColor" style="background-color:#0c4128;">&nbsp;</div>
                    <div class="discoSetBGColor" style="background-color:#6f42c1;">&nbsp;</div>
                    <div class="discoSetBGColor" style="background-color:#0d6efd;">&nbsp;</div>

                    <label id="discoParticlesSwitchContainer" for="discoParticlesSwitch">
                        <img id="discoParticlesSwitchImage" src="./assets/particle.png" title="particle">
                        <input id="discoParticlesSwitch" style="display: none">
                    </label>

                    <label class="float-start me-3 " for="discoStroboSpeed">
                        <img id="discoToggleBWStrobo" src="./assets/blackAndWhite.png" title="stroboBWChange">
                    </label>
                    <input type="range" id="discoStroboSpeed" name="discoStroboSpeed"
                           min="0" max="100" value="0" step="5">
                </div>

            </div>
        </div>
    </div>

    <div id="misc" class="mt-3 mb-3 ms-3">
        <div id="MiscLinks" class="mt-3 mb-3 ms-3">
            <h1>Misc links</h1>
            <ul>
                {{#links}}
                <li>
                    <a href="{{link}}" target=_blank>{{name}}</a>
                </li>
                {{/links}}
            </ul>
        </div>

        <div class="XXX mt-3 mb-3 ms-3" style="display:none;">
            <hr>
            <h1>adult entertainment</h1>
            <ul>
                {{#adultLinks}}
                <li>
                    <a href="{{link}}" target=_blank>{{name}}</a>
                </li>
                {{/adultLinks}}
            </ul>
        </div>
    </div>


</script>
</body>
</html>