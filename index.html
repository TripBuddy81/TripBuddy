<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FJHJG2CZF8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FJHJG2CZF8');
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Cache-control" content="no-store">

    <title>Trip Buddy</title>

    <script src="./libs/handlebars/handlebars.min-v4.7.7.js"></script>
    <script src="./libs/jquery3/jquery-3.6.3.min.js"></script>
    <script src="./libs/bootstrap-5.0.2-dist/js/bootstrap.js"></script>
    <script src="./libs/particles.js-master/particles.js"></script>
    <script src="./libs/multiple/multiple.min.js"></script>
    <script src="./libs/keyboard/main.js"></script>

    <script src="./config/config.js"></script>
    <script src="./config/optionalConfig.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/particles.js"></script>
    <script src="./js/intense.js"></script>
    <script src="./js/spotify.js"></script>

    <link rel="stylesheet" href="./libs/bootstrap-5.0.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./libs/multiple/multiple.css">
    <link rel="stylesheet" href="./libs/keyboard/styles.css">
    <link rel="icon" type="image/png" href="assets/mushroom.png"/>

</head>

<body class="sharedBackground">
<script id="mainTemplate" type="text/x-handlebars-template">
    <div id="mainMenu" class="sharedBackground">
        <span id="acticateHiddenMenue"></span>

        <!-- Left side-->
        <div class="btn btn-primary btn-lg me-2 mainSectionActive" id="showVideoSection">
            Videos
        </div>
        <div class="btn btn-primary btn-lg me-2" id="showImageSection">
            Images
        </div>
        <div class="btn btn-primary btn-lg me-2" id="showDiscoSection">
            Disco
        </div>
        <div class="btn btn-primary btn-lg me-2" id="showGamesSection">
            Games
        </div>
        <img id="turnScreenBlack" class="ms-1" src="assets/monitorOff.png">

        <!-- Right side-->
        <div id="burgerContainer" class="float-end me-3 mt-3">
            <div id="menuToggle">
                <input id="menuClose" type="checkbox"/>
                <span class="burgerMenu"></span>
                <span class="burgerMenu"></span>
                <span class="burgerMenu"></span>
                <ul id="menu">
                    <img id="refresh" class="float-end refreshIcon me-3 mt-3"
                         src="./assets/refresh.png">
                    <select id="devices"
                            class="form-control"
                            style=""></select>
                    <span class="menuvisibleAfterStarted">-- <b>Actions</b> --------------------------------------------------------------------</span>
                    <li class="menuItem deactivateGuidedThoughts menuvisibleAfterStarted">Stop guided thoughts</li>
                    <li class="menuItem menuvisibleAfterStarted" id="startPizzaTimer">Start/Reset Pizza Timer (18 min)
                    </li>

                    <div class="mt-3">-- <b>LINKS</b>
                        ----------------------------------------------------------------------
                    </div>
                    {{#menuLinks}}
                    <li>
                        <a class="menuItem" href="{{link}}" target=_blank>{{name}}</a>
                    </li>
                    {{/menuLinks}}

                    <div class="mt-3">-- <b>SETTINGS</b>
                        -----------------------------------------------------------------
                    </div>
                    <li class="menuItem" id="toggleInfo">Toggle video info</li>
                    <li class="menuItem" id="activateAllSectionsOnce">Activate all sections once on start <span
                            id="activateAllSectionsOnceSetting">(off)</span></li>
                    <li class="menuItem" id="fullscreenAutoplay">Switching video into fullscreen triggers play <span
                            id="fullscreenAutoplaySetting">(off)</span></li>
                    <li class="menuItem" id="debugMode">Debug mode - less videos <span
                            id="debugModeSetting">(off)</span></li>
                    <li><a class="menuItem" href="help.html" target="_blank">Help/Info</a></li>

                </ul>
            </div>
        </div>
        <img id="fullscreenIcon" class="toggleFullscreen float-end me-3 mt-3" src="./assets/disableFullscreen.png">
        <div id="timerMinutes" class="float-end me-3"><span id="displayHour"></span><span id="displayMinute"></span>
        </div>
        <span id="pizzaTimerContainer" class="ms-4">
            <img id="pizzaTimerSymbol" src="assets/pizza.png">
            <span id="pizzaTimerProgress">00</span>
        </span>
        <div id="launchText" class="float-end me-3 mt-3" data-bs-toggle="modal" data-bs-target="#preFlightChecklist">
            Loading...
        </div>

        <div id="progressGraphContainer" class="float-end me-3 mt-3">
            <table id="progressGraph">
                <tbody>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="ignition" data-time=0
                        style="--start:0.0; --end:0.1;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="onset" data-time=20
                        style="--start:0.1; --end:0.6;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=40
                        style="--start:0.6; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=60
                        style="--start:1.0; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=80
                        style="--start:1.0; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=100
                        style="--start:1.0; --end:1.0;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="peak" data-time=120
                        style="--start:1.0; --end:0.9;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=140
                        style="--start:0.9; --end:0.8;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=160
                        style="--start:0.8; --end:0.7;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=180
                        style="--start:0.7; --end:0.6;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=200
                        style="--start:0.6; --end:0.5;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=220
                        style="--start:0.5; --end:0.4;"></td>
                </tr>
                <tr>
                    <td class="progressGraphElement" data-progressGraphState="chillout" data-time=240
                        style="--start:0.4; --end:0.3;"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <select id="playlists" class="float-end me-2 mt-3 form-control">
            <option data-spotify-id="" value="" disabled selected value>Select Playlist</option>
            {{#playlists}}
            <option data-spotify-id="spotify:playlist:{{id}}" value="spotify:playlist:{{id}}">{{label}}</option>
            {{/playlists}}
        </select>

        <div id="iFrameSpotifyPlayerContainer" class="float-end ">
            <div id="iFrameSpotifyPlayer"></div>
        </div>

        <div id="oAuthPlayerControl" class="float-end mt-3">
            <img id="next" class="float-end playerIcon me-4 mt-3" src="./assets/next.png">
            <img id="stopMusic" class="float-end playerIcon me-3 mt-3" src="./assets/pause.png">
            <img id="spotifyIcon" class="float-end playerIcon me-3 mt-3" src="./assets/spotify.png">
        </div>

    </div>

    <div class="modal fade" id="preFlightChecklist" tabindex="-1" aria-labelledby="preFlightChecklistLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            <h1 class="modal-title" id="preFlightChecklistLabel">Preflight checklist</h1>
                            <ul>
                                {{#preFlightChecklist}}
                                <li>
                                    {{checklistItem}}
                                </li>
                                {{/preFlightChecklist}}
                            </ul>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <h1>Reminders</h1>
                                    <h3>Display Popup as reminder after configured time</h3>
                                    <div class="options form-check form-switch">
                                        <label class="form-check-label reminderLabel" for="topupCheckbox1">Top Up
                                            Shrooms after </label>
                                        <input class="form-check-input" type="checkbox" id="topupCheckbox1">
                                        <input type="number" id="topupReminderInMinutes1" name="topupReminderInMinutes1"
                                               value="50" min="1" max="600">
                                        <span>minutes</span>
                                    </div>
                                    <div class="options form-check form-switch">
                                        <label class="form-check-label reminderLabel" for="topupCheckbox2">Take Weed
                                            after </label>
                                        <input class="form-check-input" type="checkbox" id="topupCheckbox2">
                                        <input type="number" id="topupReminderInMinutes2" name="topupReminderInMinutes2"
                                               value="90" min="1" max="600">
                                        <span>minutes</span>
                                    </div>

                                    <div class="options form-check form-switch">
                                        <label class="form-check-label reminderLabel" for="orderPizzaCheckbox">Order
                                            Pizza after </label>
                                        <input class="form-check-input" type="checkbox" id="orderPizzaCheckbox">
                                        <input type="number" id="orderPizzaReminderInMinutes"
                                               name="orderPizzaReminderInMinutes"
                                               value="180" min="1" max="600">
                                        <span>minutes</span>
                                    </div>
                                </div>
                            </div>

                            <div id="guidedThoughtsSettings" class="row mt-3">
                                <div class="col">
                                    <h1>Guided thoughts</h1>
                                    <h3>Will display given texts from time to time</h3>
                                    <label class="form-check-label me-2" for="guidedThought1">#1</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought1"
                                           name="guidedThought1"
                                           value="" maxlength="40"> </br>

                                    <label class="form-check-label me-2" for="guidedThought1">#2</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought2"
                                           name="guidedThought2"
                                           value="" maxlength="40"> </br>

                                    <label class="form-check-label me-2" for="guidedThought1">#3</label>
                                    <input class="guidedThoughtsTextInput" type="text" id="guidedThought3"
                                           name="guidedThought3"
                                           value="" maxlength="40"> </br>

                                    <label class="firstGuidedThoughtMinLabel form-check-label me-2"
                                           for="firstGuidedThoughtMin">Minutes till first thought appears at all</label>
                                    <input type="number" id="firstGuidedThoughtMin" name="firstGuidedThoughtMin"
                                           value="60" min="0" max="600">

                                    <label class="guidedThoughtMinutesLabel form-check-label me-2"
                                           for="guidedThoughtMinMinutes">Min minutes till next thought appears</label>
                                    <input type="number" class="guidedThoughtMinutes" id="guidedThoughtMinMinutes"
                                           name="guidedThoughtMinMinutes"
                                           value="15" min="1" max="60"> </br>

                                    <label class="guidedThoughtMinutesLabel form-check-label me-2"
                                           for="guidedThoughtMaxMinutes">Max minutes till next thought appears</label>
                                    <input type="number" class="guidedThoughtMinutes" id="guidedThoughtMaxMinutes"
                                           name="guidedThoughtMaxMinutes"
                                           value="20" min="1" max="60">

                                    <h3 class="mt-3">Reminder suggestions <span id="clearReminders">(clear all)</span>
                                    </h3>
                                    {{#reminderSelection}}
                                    <span class="reminderSuggestion">{{reminder}}</span>
                                    {{/reminderSelection}}

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div id="liftOff" type="button" class="btn btn-primary">Lift off!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="timedRecommendation" tabindex="-1" aria-labelledby="timedRecommendationLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body d-flex align-items-center justify-content-center">
                    <h1 id="topupRecommendation">Top up now!</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>

    <div id="videos" class="ms-3">
        <div class="sticky sharedBackground">
            {{#selectableVideoTags}}
            <div id="{{selectableTag}}filter" class="{{selectableTag}}filter videoFilterBtn btn btn-primary me-2">
                {{selectableTag}}
            </div>
            {{/selectableVideoTags}}
            <div class="XXX XXXfilter videoFilterBtn btn btn-primary me-2">XXX</div>
        </div>

        <div id="displayedVideos">
            <div class="videoContainer XXX" id="searchBar">
                <label class="searchLabel form-check-label me-2" for="searchInput">Search: </label>
                <input type="text" class="me-2" id="searchInput" name="searchInput" value=""
                       placeholder="enter search text here!" data-trigger-keyboard="true">
                <label class="searchLabel form-check-label me-2" for="searchInput">--></label>

                {{#searchEngines}}
                <a class="searchLink {{tag}}" href="{{link}}" target=_blank>{{name}}</a>
                {{/searchEngines}}
                <br>
            </div>

            {{#videosYoutube}}
            <div class="videoContainer {{tags}}">
                <div class="iFrameContainer">
                    <iframe width="554" height="315" class="videoFrame" src="{{videoLink}}&rel=0&cc_load_policy=0"
                            frameborder="0"
                            allow=""
                            scrolling="no"
                            loop
                            sandbox="allow-scripts allow-same-origin"></iframe>
                    <div class="videoInfo mb-2">
                        <div>{{tags}}</div>
                        <div>({{videoLink}})</div>
                    </div>
                    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>
                    <div class="videoLabel">
                        {{label}}
                    </div>
                    <div class="videoMenuOverlayMinimized">
                        <img class="enableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayMinimized2"></div>
                    <div class="videoMenuOverlayFullscreen">
                        <img class="disableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayFullscreen2"></div>
                    <div class="videoMenuOverlayFullscreenTime videoMenuOverlay">
                    </div>
                </div>
            </div>
            {{/videosYoutube}}

            {{#videosLocal}}
            <div class="videoContainer {{tags}}">
                <div class="iFrameContainer">
                    <video class="videoFrame" controls muted loop controlsList="nofullscreen">
                        <source src="{{videoLink}}" type="video/mp4">
                    </video>
                    <div class="videoInfo mb-2">{{tags}}
                        <div>({{videoLink}})</div>
                    </div>
                    <div class="guidedThoughtsContainer"><span class="guidedThoughtsText"></span></div>
                    <div class="videoLabel">
                        {{label}}
                    </div>
                    <div class="videoMenuOverlayMinimized">
                        <img class="enableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayFullscreen">
                        <img class="disableVideoFullscreenIcon" src="./assets/fullscreenToggle_red.png">
                    </div>
                    <div class="videoMenuOverlayFullscreenTime videoMenuOverlay">
                    </div>
                </div>
            </div>
            {{/videosLocal}}
        </div>

        <div class="videoContainer XXX mt-4 mb-4" style="display:none;width: 100% !important;">
            <h1>External Videos</h1>
            {{#externalVideoLinks}}
            <a class="xxxLink mt-4 mb-4" href="{{link}}" target=_blank>{{name}}<img class="externalVideoPreview"
                                                                                    src="{{thumb}}"></a>
            {{/externalVideoLinks}}
        </div>
    </div>

    <div id="images" class="mt-3 mb-3 ms-3">
        <div id="imageTags" class="sticky sharedBackground">
            {{#selectableImageTags}}
            <div id="{{selectableTag}}filter" class="{{selectableTag}}filter imageFilterBtn btn btn-primary me-2">
                {{selectableTag}}
            </div>
            {{/selectableImageTags}}
            <div class="MageAI MageAIfilter imageFilterBtn btn btn-primary me-2">MageAI</div>
            <div class="XXX MageAIFavorites imageFilterBtn btn btn-primary me-2">MageAI Favorites</div>
            <div class="XXX XXXfilter imageFilterBtn btn btn-primary me-2">XXX</div>
        </div>

        <div id="displayedImages">
            {{#images}}
            <img width="525" height="300" src="{{image}}" class="fullscreenImage {{tags}}"
                 data-image="{{image}}">
            {{/images}}

            <iframe id="MageAIExternalPage" class="MageAI fullscreenImage"
                    src="https://www.mage.space/explore?q=psychedelic"></iframe>
        </div>
        <div class="videoMenuOverlayFullscreenTime videoMenuOverlay">
        </div>
        <div class="imageSlideshowControls videoMenuOverlay">
            <img id="startSlideshow" class="playerIcon me-4 ms-4" src="./assets/play.png">
            <input class="float-end playerIcon me-4 ms-4" type="number" id="slideshowInterval" name="slideshowInterval"
                   min="10" max="300" value="60" step="10">
        </div>

        <div class="fullscreenImage XXX mt-4 mb-4" style="display:none;width: 100% !important;">
            <h1 class="cursorNormal">External Pics</h1>
            {{#externalPicLinks}}
            <a class="xxxLink" href="{{link}}" target=_blank>{{name}}<img class="externalVideoPreview" src="{{thumb}}"></a>
            {{/externalPicLinks}}
        </div>
    </div>

    <div id="disco" class="">
        <div id="absoluteTruthsOverlay">
            <div id="absoluteTruthsOverlayContainer"><span id="absoluteTruthsOverlayText">Things I know to be true</span>
            </div>
        </div>

        <div id="discoSettingsContainer">
            <div id="discoSettings">
                <label id="discoBGColorPickerContainer" for="discoBGColorPicker">
                    <img id="discoBGColorPickerImage" src="./assets/colorpicker.png">
                    <input type="color" id="discoBGColorPicker" style="display: none">
                </label>
                <div class="discoSetBGColor" style="background-color:#000000;">&nbsp;</div>
                <div class="discoSetBGColor" style="background-color:#363636;">&nbsp;</div>
                <div class="discoSetBGColor" style="background-color:#B61924;">&nbsp;</div>
                <div class="discoSetBGColor" style="background-color:#6f42c1;">&nbsp;</div>

                <label id="discoParticlesSwitchContainer" for="discoParticlesSwitch">
                    <img id="discoParticlesSwitchImage" src="./assets/particle.png" title="particle">
                    <input id="discoParticlesSwitch" style="display: none">
                </label>

                <label class="float-start me-3 " for="discoStroboSpeed">
                    <img id="discoToggleBWStrobo" src="./assets/blackAndWhite.png" title="stroboBWChange">
                </label>
                <input type="range" id="discoStroboSpeed" name="discoStroboSpeed"
                       min="0" max="100" value="0" step="5">
            </div>
        </div>
        <div id="particles-js">
            <img id="ensoImageDisco" src="./assets/enso.png">
        </div>
    </div>

    <div id="games" class="">
        <div id="gamesLinks" class="sticky sharedBackground">
            <div data="{{link}}" class="VRGamesBtn gameLink btn btn-primary me-2">
                VR Games
            </div>

            {{#gameLinks}}
            <div data="{{link}}" class="gameLink btn btn-primary me-2">
                {{name}}
            </div>
            {{/gameLinks}}
        </div>

        <iframe id="gamesFrame" class="" src=""></iframe>

        <div class="VRGames sharedBackground">
            {{#VRGames}}
            <span class="VRGameLinkContainer {{class}}">
                <a class="VRGameLink" href="{{link}}">
                    <img class="VRGameImage" src="{{image}}">
                    <div class="VRGameName">{{name}}</div>
                </a>
            </span>
            {{/VRGames}}
        </div>
    </div>

</script>
</body>
</html>